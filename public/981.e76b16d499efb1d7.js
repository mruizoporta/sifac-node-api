"use strict";(self.webpackChunksifac_oporta=self.webpackChunksifac_oporta||[]).push([[981],{2013:(Z,f,n)=>{n.d(f,{g:()=>p});var a=n(4650),s=n(7185);let p=(()=>{class u{constructor(d){this.toastr=d}showSuccess(d,i){this.toastr.success(d,i)}showError(d,i){this.toastr.error(d,i)}showInfo(d,i){this.toastr.info(d,i)}showWarning(d,i){this.toastr.warning(d,i)}}return u.\u0275fac=function(d){return new(d||u)(a.LFG(s._W))},u.\u0275prov=a.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},382:(Z,f,n)=>{n.d(f,{F:()=>u});var a=n(5938),s=n(4650),p=n(4859);let u=(()=>{class r{constructor(i,m){this.dialogo=i,this.mensaje=m}cerrarDialogo(){this.dialogo.close(!1)}confirmado(){this.dialogo.close(!0)}ngOnInit(){}}return r.\u0275fac=function(i){return new(i||r)(s.Y36(a.so),s.Y36(a.WI))},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-dialogo-confirmacion"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"click"]],template:function(i,m){1&i&&(s.TgZ(0,"h1",0),s._uU(1,"Confirmaci\xf3n"),s.qZA(),s.TgZ(2,"div",1)(3,"p"),s._uU(4),s.qZA()(),s.TgZ(5,"div",2)(6,"button",3),s.NdJ("click",function(){return m.cerrarDialogo()}),s._uU(7,"No"),s.qZA(),s.TgZ(8,"button",4),s.NdJ("click",function(){return m.confirmado()}),s._uU(9,"S\xed"),s.qZA()()),2&i&&(s.xp6(4),s.Oqu(m.mensaje))},dependencies:[p.lW,a.uh,a.xY,a.H8],encapsulation:2}),r})()},6761:(Z,f,n)=>{n.d(f,{C:()=>s});var a=n(4650);let s=(()=>{class p{constructor(){}ngOnInit(){}}return p.\u0275fac=function(r){return new(r||p)},p.\u0275cmp=a.Xpm({type:p,selectors:[["app-main-footer"]],decls:8,vars:0,consts:[[1,"main-footer"],[1,"float-right","d-none","d-sm-inline-block"]],template:function(r,d){1&r&&(a.TgZ(0,"footer",0)(1,"strong"),a._uU(2,"Copyright \xa9 2020 Blessing S.A."),a.qZA(),a._uU(3," Todos los derechos reservados. "),a.TgZ(4,"div",1)(5,"b"),a._uU(6,"Version"),a.qZA(),a._uU(7," 1.0 "),a.qZA()())},styles:[".main-footer[_ngcontent-%COMP%]{background-color:#fff;border-top:1px solid #dee2e6;color:#869099;padding:1rem;bottom:0}"]}),p})()},6838:(Z,f,n)=>{n.d(f,{$:()=>u});var a=n(4650),s=n(3060),p=n(6518);let u=(()=>{class r{constructor(i,m){this.router=i,this.authService=m}ngOnInit(){}logout(){this.router.navigateByUrl("/auth"),this.authService.logout()}}return r.\u0275fac=function(i){return new(i||r)(a.Y36(s.F0),a.Y36(p.e))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-main-header"]],decls:23,vars:0,consts:[[1,"main-header","navbar","navbar-expand","navbar-white","navbar-light"],[1,"navbar-nav"],[1,"nav-item"],["data-widget","pushmenu","href","#","role","button",1,"nav-link"],[1,"fas","fa-bars"],[1,"nav-item","d-none","d-sm-inline-block"],["href","index3.html",1,"nav-link"],[1,"navbar-nav","ml-auto"],[1,"nav-item","dropdown","no-arrow"],["href","#","id","userDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"mr-2","d-none","d-lg-inline","text-gray-600","small"],["src","assets/img/undraw_profile.svg","alt","User Avatar",1,"img-size-32","img-circle","mr-3"],[1,"dropdown-menu","dropdown-menu-lg","dropdown-menu-right"],["href","# ",1,"dropdown-item"],[1,"fas","fa-user","fa-sm","fa-fw","mr-2","text-gray-400"],[1,"dropdown-divider"],[1,"fas","fa-user","fa-sm","fa-fw","mr-2","text-gray-400",3,"click"]],template:function(i,m){1&i&&(a.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2)(3,"a",3),a._UZ(4,"i",4),a.qZA()(),a.TgZ(5,"li",5)(6,"a",6),a._uU(7,"Dashboard"),a.qZA()()(),a.TgZ(8,"ul",7)(9,"li",8)(10,"a",9)(11,"span",10),a._uU(12,"Milagros Ruiz Oporta"),a.qZA(),a._UZ(13,"img",11),a.qZA(),a.TgZ(14,"div",12)(15,"a",13)(16,"a",13),a._UZ(17,"i",14),a._uU(18," Perfil "),a.qZA(),a._UZ(19,"div",15),a.TgZ(20,"a",13)(21,"i",16),a.NdJ("click",function(){return m.logout()}),a.qZA(),a._uU(22," Cerrar Sesion "),a.qZA()()()()()())},encapsulation:2}),r})()},8981:(Z,f,n)=>{n.r(f),n.d(f,{ZonasModule:()=>X});var a=n(6895),s=n(3060),p=n(7974),u=n(6308),r=n(7155),d=n(382),i=n(4006),m=n(5938),t=n(4650),A=n(2340),S=n(529);let _=(()=>{class e{constructor(o){this.http=o,this.baseUrl=A.N.baseUrl}getZonas(o){return this.http.get(`${this.baseUrl}/zone/${o}`)}inactivarZone(o){return this.http.put(`${this.baseUrl}/zone/inactivar/${o}`,[])}agregarZone(o){return this.http.post(`${this.baseUrl}/zone`,o)}editarZone(o,c){return this.http.put(`${this.baseUrl}/zone/${c}`,o)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(S.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var z=n(6518),y=n(2013),w=n(7009),T=n(4859),x=n(4850),C=n(9549),b=n(4144);function E(e,l){1&e&&(t.TgZ(0,"span",9),t._uU(1,"El nombre es requerido"),t.qZA())}let U=(()=>{class e{constructor(o,c,h,g,v,q,V,tt){this.fb=o,this.zoneServices=c,this.authService=h,this.notifyService=g,this.dialog=v,this.snackBar=q,this.dialogRef=V,this.editdata=tt,this.dateTime=new Date,this.titulo="Agregar zona"}get usuario(){return this.authService.usuario}getCompany(){return sessionStorage.getItem("company")}ngOnInit(){this.login=this.authService.usuario.email.substring(0,this.authService.usuario.email.indexOf("@")),this.addzoneForm=this.fb.group({name:["",i.kI.required],description:[],isactive:1,createdon:this.dateTime,createdby:this.login,modifiedon:this.dateTime,modifiedby:"",bsc_company_companyid:this.getCompany()}),this.editdata&&(this.titulo="Editar zona",this.addzoneForm.controls.name.setValue(this.editdata.name),this.addzoneForm.controls.description.setValue(this.editdata.description))}guardar(){this.editdata?this.actualizarZona():this.addzoneForm.valid&&(console.log(this.addzoneForm.value),this.zoneServices.agregarZone(this.addzoneForm.value).subscribe({next:o=>{this.notifyService.showSuccess("Zona agregada satisfactoriamente","SIFAC"),this.addzoneForm.reset(),this.dialogRef.close("save")},error:()=>{this.notifyService.showError("Error agregando la zona","SIFAC")}}))}actualizarZona(){console.log(this.addzoneForm.value),console.log(this.editdata.zoneid),this.zoneServices.editarZone(this.addzoneForm.value,this.editdata.zoneid).subscribe({next:o=>{this.addzoneForm.reset(),this.dialogRef.close("update"),this.notifyService.showSuccess("Zona actualizada satisfactoriamente","SIFAC")},error:()=>{this.notifyService.showError("Error actualizando la zona","SIFAC")}})}campoEsValido(o){return this.addzoneForm.controls[o].errors&&this.addzoneForm.controls[o].touched}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(i.qu),t.Y36(_),t.Y36(z.e),t.Y36(y.g),t.Y36(m.uw),t.Y36(w.ux),t.Y36(m.so),t.Y36(m.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-agregar"]],decls:15,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["autocomplete","off",3,"formGroup"],["appearance","outline"],["formControlName","name","matInput","","placeholder","Nombre"],["class","form-text text-danger",4,"ngIf"],["mat-dialog-actions","",3,"align"],["mat-raised-button","","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],[1,"form-text","text-danger"]],template:function(o,c){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t._UZ(2,"mat-divider"),t.TgZ(3,"div",1)(4,"form",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Nombre"),t.qZA(),t._UZ(8,"input",4),t.YNc(9,E,2,0,"span",5),t.qZA()()(),t.TgZ(10,"div",6)(11,"button",7),t._uU(12," Cancelar"),t.qZA(),t.TgZ(13,"button",8),t.NdJ("click",function(){return c.guardar()}),t._uU(14," Guardar"),t.qZA()()),2&o&&(t.xp6(1),t.Oqu(c.titulo),t.xp6(3),t.Q6J("formGroup",c.addzoneForm),t.xp6(5),t.Q6J("ngIf",c.campoEsValido("name")),t.xp6(1),t.Q6J("align","end"))},dependencies:[a.O5,T.lW,x.d,C.KE,C.hX,b.Nt,m.ZT,m.uh,m.xY,m.H8,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})();var M=n(6838),F=n(8572),D=n(3507),O=n(6761),N=n(3683),I=n(7392);function L(e,l){1&e&&(t.TgZ(0,"th",28),t._uU(1," Codigo "),t.qZA())}function Y(e,l){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.hij(" ",o.zoneid," ")}}function P(e,l){1&e&&(t.TgZ(0,"th",28),t._uU(1," Nombre "),t.qZA())}function B(e,l){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.hij(" ",o.name," ")}}function R(e,l){1&e&&t._UZ(0,"th",28)}function J(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"td",29)(1,"button",30),t.NdJ("click",function(){const g=t.CHM(o).$implicit,v=t.oxw();return t.KtG(v.editZone(g))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",31),t.NdJ("click",function(){const g=t.CHM(o).$implicit,v=t.oxw();return t.KtG(v.mostrarConfirmacionEliminar(g.zoneid))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function W(e,l){1&e&&t._UZ(0,"tr",32)}function H(e,l){1&e&&t._UZ(0,"tr",33)}function k(e,l){if(1&e&&(t.TgZ(0,"tr",34)(1,"td",35),t._uU(2),t.qZA()()),2&e){t.oxw();const o=t.MAs(25);t.xp6(2),t.hij('No data matching the filter "',o.value,'"')}}const K=function(){return[5,10,25,100]},Q=[{path:"",children:[{path:"lista",component:(()=>{class e{constructor(o,c,h){this.zoneService=o,this.notifyService=c,this.dialog=h,this.displayedColumns=["zoneid","name","action"],this.zona=[]}ngOnInit(){this.company=Number(this.getCompany()),this.getZona()}getCompany(){return sessionStorage.getItem("company")}getZona(){this.zoneService.getZonas(this.company).subscribe({next:o=>{this.dataSource=new r.by(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},error:o=>{console.log(o),this.notifyService.showError("Error obteniendo la lista","SIFAC")}})}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openDialog(){this.dialog.open(U,{width:"30%"}).afterClosed().subscribe(o=>{"save"===o&&this.getZona()})}editZone(o){this.dialog.open(U,{width:"30%",data:o}).afterClosed().subscribe(c=>{"update"===c&&this.getZona()})}eliminarBrand(o){this.zoneService.inactivarZone(o).subscribe({next:c=>{this.getZona(),this.notifyService.showSuccess("La zona se inactivo correctamente.","SIFAC")},error:()=>{this.notifyService.showError("Error inactivando la zona","SIFAC")}})}mostrarConfirmacionEliminar(o){this.dialog.open(d.F,{data:"\xbfEsta seguro de inactivar la zona?"}).afterClosed().subscribe(c=>{c&&this.eliminarBrand(o)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_),t.Y36(y.g),t.Y36(m.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-lista"]],viewQuery:function(o,c){if(1&o&&(t.Gf(u.YE,5),t.Gf(p.NW,5)),2&o){let h;t.iGM(h=t.CRH())&&(c.sort=h.first),t.iGM(h=t.CRH())&&(c.paginator=h.first)}},decls:45,vars:5,consts:[[1,"content-wrapper"],[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-sm-6"],["color","primary"],["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon"],[1,"example-spacer"],["mat-raised-button","","mt-2","","color","warn",3,"click"],[1,"material-icons"],[1,"spacer"],[1,"container"],[2,"margin-top","10px"],["appearance","standard"],["autocomplete","off","matInput","","placeholder","Busqueda",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["id","BrandTable","mat-table","","matSort","",3,"dataSource"],["matColumnDef","zoneid"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],[1,"content"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,c){1&o&&(t._UZ(0,"app-main-header")(1,"app-main-sidebar"),t.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"div",3),t._UZ(6,"div",4),t.TgZ(7,"mat-toolbar",5)(8,"button",6)(9,"mat-icon"),t._uU(10," supervised_user_circle"),t.qZA()(),t.TgZ(11,"span"),t._uU(12,"Zonas"),t.qZA(),t._UZ(13,"span",7),t.TgZ(14,"button",8),t.NdJ("click",function(){return c.openDialog()}),t._uU(15,"Nuevo "),t.TgZ(16,"span",9),t._uU(17,"add"),t.qZA()(),t._UZ(18,"span",10),t.qZA(),t.TgZ(19,"div",11)(20,"div",12)(21,"mat-form-field",13)(22,"mat-label"),t._uU(23,"Buscar"),t.qZA(),t.TgZ(24,"input",14,15),t.NdJ("keyup",function(g){return c.applyFilter(g)}),t.qZA()(),t.TgZ(26,"div",16)(27,"table",17),t.ynx(28,18),t.YNc(29,L,2,0,"th",19),t.YNc(30,Y,2,1,"td",20),t.BQk(),t.ynx(31,21),t.YNc(32,P,2,0,"th",19),t.YNc(33,B,2,1,"td",20),t.BQk(),t.ynx(34,22),t.YNc(35,R,1,0,"th",19),t.YNc(36,J,7,0,"td",20),t.BQk(),t._uU(37," --\x3e "),t.YNc(38,W,1,0,"tr",23),t.YNc(39,H,1,0,"tr",24),t.YNc(40,k,3,1,"tr",25),t.qZA(),t._UZ(41,"mat-paginator",26),t.qZA()()()()()(),t._UZ(42,"section",27),t.qZA(),t._UZ(43,"app-control-sidebar")(44,"app-main-footer")),2&o&&(t.xp6(27),t.Q6J("dataSource",c.dataSource),t.xp6(11),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(4,K)))},dependencies:[M.$,F.g,D.B,O.C,N.Ye,T.lW,I.Hw,C.KE,C.hX,b.Nt,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,r.Ee,p.NW,u.YE,u.nU],styles:['@charset "UTF-8";  .example-spacer{flex:1 1 auto}table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:15%}.mat-header-cell[_ngcontent-%COMP%]{background:#7E2FB6;color:#fff}  .mat-sort-header-arrow[style] .mat-sort-header-stem{display:none}  .mat-sort-header-arrow[style] .mat-sort-header-indicator{opacity:10;color:#fff;font-weight:700}  .mat-sort-header-arrow[style] .mat-sort-header-indicator .mat-sort-header-pointer-left,   .mat-sort-header-arrow[style] .mat-sort-header-indicator .mat-sort-header-pointer-right,   .mat-sort-header-arrow[style] .mat-sort-header-indicator .mat-sort-header-pointer-middle{display:none}[aria-sort=ascending][_ngcontent-%COMP%]     .mat-sort-header-arrow .mat-sort-header-indicator:before{content:"\\25b4";top:0em;position:absolute;color:#fff;font-size:30px;line-height:10px}[aria-sort=descending][_ngcontent-%COMP%]     .mat-sort-header-arrow .mat-sort-header-indicator:before{content:"\\25be";top:-15px;position:absolute;color:#fff;font-size:30px}']}),e})()}]}];let $=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(Q),s.Bz]}),e})();var G=n(1469),j=n(6443);let X=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.ez,$,G.m,j.q,i.UX]}),e})()}}]);